# ACM

ACM，全名Amazing Choochoo Mogician，奇妙的火车膜法师。他出生于ACM班2018年的数据结构课上，隐藏在交大校园里，控制着火车票时空使命。

他的背后有四位兢兢业业的程序员：汪伟杰，曾比扬，张文涛，姜卫邦。

![avatar](splash.png)

## 1 开发分工

### 1.1 具体功能

普通用户：注册、登录、修改信息，查票、订票，确认已经订过的票、退票；

管理员：普通用户的所有功能，提升普通用户为管理员，添加修改删除发售车次。

### 1.2 任务分配

鉴于本次作业的各种要求和任务，我们小组有如下的分工细则：

 |    姓名    | 角色 |                 任务                |
 | --------- | ---- | ----------------------------------- |
 | **汪伟杰** | 组长 | 前端桌面GUI以及相应的前后端通信       |
 | **曾比扬** | 组员 | 后端的架构设计和封装完善，网页端辅助   |
 | **张文涛** | 组员 | 后端B+树，网页端主力                  |
 | **姜卫邦** | 组员 | 后端其他基础结构和基本实现，部分UI设计 |

于是乎，这样定下任务分工后，小伙伴们就愉快地开始了写代码的~~苦力活~~游戏了。

## 2 项目实现

具体的使用方法与大气的界面欣赏请参见ACM团队出品的《用户手册》。

### 2.1 桌面GUI

本次的桌面GUI采用C# WPF框架实现。汪同学以前因为兴趣写过几个C#小白GUI，以为这次的作业难不到哪里去，就主动接下了这个GUI全部的活，然后才发现自己入了一个大坑。今天要学触发器，明天要啃写样式，时不时还要忍受傲娇的vs弹出的莫名的 “**未知错误，应用程序中断**”，真是酸爽。

整个程序的所有功能基本在一个窗口中实现，有一个铺满的容器用来放各个页面（Page）。页面里有：PgLogin，PgRegister，PgAdmin，PgUser，PgUsers，PgProfile，PgQuery，PgMyTicket，PgTrain，PgTrains …… 各自的功能在名字中就可以看出来，各页面之间的切换还用上了一些手写的动画。

最复杂的部分就是前端与C++后端的交互了。汪同学经过百度后采取的解决方案是：用C++ CLi（公共运行时）将后端封装起来，编译成dll文件给C#调用。这里为了适配C++ CLi，各种数据类型的使用都要小心翼翼，比如C#里的string对应System::String^（是不是很丑？），构造List要写成List<T ^> ^l = gcnew List<T ^>(0);（是不是更丑了？）奋战了几百个error还残留了几十个warning后，前后端交互成功啦！

### 2.2 后端

### 2.3 网页端

## 3 组员吐槽